{"ast":null,"code":"'use strict';\n\nconst fs = require('fs');\n\nconst promisify = require('util.promisify');\n\nconst promisiedFsRealpath = promisify(fs.realpath);\n\nfunction realpath(filepath) {\n  if (typeof fs.realpath.native === 'function') {\n    return promisify(fs.realpath.native)(filepath);\n  }\n\n  const fsBinding = process.binding('fs');\n\n  if (fsBinding.realpath) {\n    return new Promise((resolve, reject) => {\n      try {\n        resolve(fsBinding.realpath(filepath, 'utf8'));\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  return promisiedFsRealpath(filepath);\n}\n\nfunction realpathSync(filepath) {\n  if (typeof fs.realpathSync.native === 'function') {\n    return fs.realpathSync.native(filepath);\n  }\n\n  const fsBinding = process.binding('fs');\n\n  if (fsBinding.realpath) {\n    try {\n      return fsBinding.realpath(filepath, 'utf8');\n    } catch (err) {\n      /* Probably RAM-disk on windows. */\n    }\n  }\n\n  return fs.realpathSync(filepath);\n}\n\nmodule.exports = realpath;\nmodule.exports.sync = realpathSync;","map":null,"metadata":{},"sourceType":"script"}