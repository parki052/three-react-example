{"ast":null,"code":"'use strict';\n\nconst path = require('path');\n\nconst pathKey = require('path-key');\n\nmodule.exports = opts => {\n  opts = Object.assign({\n    cwd: process.cwd(),\n    path: process.env[pathKey()]\n  }, opts);\n  let prev;\n  let pth = path.resolve(opts.cwd);\n  const ret = [];\n\n  while (prev !== pth) {\n    ret.push(path.join(pth, 'node_modules/.bin'));\n    prev = pth;\n    pth = path.resolve(pth, '..');\n  } // ensure the running `node` binary is used\n\n\n  ret.push(path.dirname(process.execPath));\n  return ret.concat(opts.path).join(path.delimiter);\n};\n\nmodule.exports.env = opts => {\n  opts = Object.assign({\n    env: process.env\n  }, opts);\n  const env = Object.assign({}, opts.env);\n  const path = pathKey({\n    env\n  });\n  opts.path = env[path];\n  env[path] = module.exports(opts);\n  return env;\n};","map":null,"metadata":{},"sourceType":"script"}